# Svelteç®€ä»‹

## å‰è¨€

å‰å‡ å¤©åœ¨åˆ·githubè¶‹åŠ¿æ¦œï¼Œæ„å¤–çš„å‘ç°äº†è¿™ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡é˜…è¯»æ–‡æ¡£ä¸ç›¸å…³èµ„è®¯äº†è§£åˆ°Svelteçš„ç”¨æ³•ï¼Œå¥½å¤„ä»¥åŠç¼ºé™·ï¼Œå¹¶å¯¹å…¶æ€æƒ³æ·±æ·±çš„å¸å¼•ï¼Œè™½ç„¶æ¡†æ¶å­˜åœ¨è¯¸å¤šä¸è¶³ï¼Œç”Ÿæ€åœˆä¹Ÿä¸ç®—å®Œå–„ï¼Œä½†æ˜¯æˆ‘ä¸ªäººè®¤ä¸ºï¼Œè¿™ä¸å¤±ä¸ºä¸€ç§webç»„ä»¶åŒ–æ–¹å‘çš„æ¢ç´¢ã€‚åœ¨å¯»æ‰¾èµ„æ–™çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°Svelteå‡ ä¹æ²¡æœ‰ä»€ä¹ˆä¸­æ–‡ç›¸å…³èµ„æ–™å’Œä¸­æ–‡æ–‡æ¡£ï¼Œäºæ˜¯æˆ‘å†³å®šå…ˆå°†å…¶æ–‡æ¡£ç¿»è¯‘æˆä¸­æ–‡ï¼Œè¿™æ ·èƒ½è®©æ›´å¤šçš„äººäº†è§£åˆ°Svelteæ¡†æ¶ã€‚å¤§å®¶ä¹Ÿå¯ä»¥ä¸€èµ·ä¸ºå®ƒæ·»ç –åŠ ç“¦ã€‚

[ç›¸å…³èµ„æ–™](https://github.com/tgxpuisb/sveltejs-documentation-zh-CN/blob/master/other-info.md)ä¹Ÿä¼šé•¿æœŸæ›´æ–°ã€‚

ä»¥ä¸‹æ˜¯ç¿»è¯‘çš„å†…å®¹ã€‚å¦‚æœä½ æœ‰ä»€ä¹ˆå¥½çš„æƒ³æ³•ï¼Œæˆ–è€…ç¿»è¯‘ä¸­å­˜åœ¨ä»€ä¹ˆé”™è¯¯ï¼Œæ¬¢è¿æ[iusse](https://github.com/tgxpuisb/sveltejs-documentation-zh-CN/issues)æŒ‡æ­£ï¼Œéå¸¸æ„Ÿè°¢ã€‚


## ä»€ä¹ˆæ˜¯Svelte
å¦‚æœæ‚¨æ›¾ç»æ„å»ºè¿‡JavaScriptåº”ç”¨ç¨‹åºï¼Œä½ æˆ–å¤šæˆ–å°‘ä½¿ç”¨è¿‡Reactï¼ŒAngularï¼ŒVueå’ŒRactiveã€‚ä¸Svelteå¾ˆåƒï¼Œè¿™äº›å·¥å…·éƒ½æœ‰ä¸€ä¸ªç›®æ ‡ï¼Œå°±æ˜¯å¯ä»¥è½»æ¾çš„æ„å»ºäº¤äº’å¼ç”¨æˆ·ç•Œé¢ã€‚

ä½†Svelteæœ‰ä¸€ä¸ªå…³é”®çš„åŒºåˆ«ï¼šä½ çš„åº”ç”¨ç¨‹åºä¼šåœ¨æ‰“åŒ…æ„å»ºæ—¶ï¼ˆbuildï¼‰è¢«è½¬åŒ–æˆåŸç”Ÿçš„å¯æ‰§è¡Œçš„javascriptä»£ç ï¼Œä¸”ä¸éœ€è¦ä¸€ä¸ªè¿è¡Œæ—¶ï¼ˆruntimeï¼‰æ¥è§£é‡Šä½ çš„åº”ç”¨ç¨‹åºä»£ç ã€‚è¿™æ„å‘³ç€ä½ æ— éœ€è´Ÿæ‹…ç”±äºæ¡†æ¶æŠ½è±¡æˆ–è€…åœ¨ä½ çš„åº”ç”¨é¦–æ¬¡åŠ è½½æ—¶äº§ç”Ÿçš„æ€§èƒ½æŸè€—ã€‚

å¹¶ä¸”ï¼Œç”±äºæ²¡æœ‰é¢å¤–çš„ä½¿ç”¨æˆæœ¬ï¼Œä½ å¯ä»¥è½»æ¾åœ°åœ¨ç°æœ‰çš„ç¨‹åºä¸­é€æ¸é‡‡ç”¨Svelteï¼Œæˆ–è€…å°†å°éƒ¨ä»¶ä½œä¸ºç‹¬ç«‹çš„ç»„ä»¶ä½¿ç”¨åˆ°ä»»ä½•çš„åœ°æ–¹ã€‚

[é˜…è¯»ä»‹ç»æ€§åšå®¢æ–‡ç« ](https://svelte.technology/blog/frameworks-without-the-framework)ï¼Œäº†è§£æ›´å¤šå…³äºSvelteçš„ç›®æ ‡å’Œå“²å­¦ã€‚

[ä¸­æ–‡ä»‹ç»](https://github.com/tgxpuisb/sveltejs-documentation-zh-CN/blob/master/author-blog.md)

## è®¤è¯†ä¸ç†è§£svelteç»„ä»¶
åœ¨Svelteä¸­ï¼Œåº”ç”¨ç¨‹åºç”±ä¸€ä¸ªæˆ–å¤šä¸ªç»„ä»¶ç»„æˆã€‚ç»„ä»¶æ˜¯å°è£…äº†æ ‡ç­¾çš„ï¼Œæ ·å¼ï¼Œä¸è¡Œä¸ºçš„å¯å¤ç”¨çš„è‡ªåŒ…å«ä»£çš„ç å—ã€‚(å¾ˆåƒ.vueæ–‡ä»¶)ã€‚

åƒRactiveå’ŒVueä¸€æ ·ï¼ŒSvelteä¹Ÿå´‡å°šå•æ–‡ä»¶ç»„ä»¶çš„æ¦‚å¿µï¼šç»„ä»¶åªæ˜¯ä¸€ä¸ª`.html`æ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š

```html
<!-- App.html -->
<h1>Hello {{name}}!</h1>
```

Svelteä¼šæŠŠå®ƒè½¬æ¢ä¸ºå¯ä»¥ä¸€ä¸ªå¯ç›´æ¥è¢«å¼•å…¥åˆ°ä½ çš„åº”ç”¨ç¨‹åºä¸­çš„JavaScriptæ¨¡å—ï¼š

```
// main.js
import App from './App.html';

const app = new App({
  target: document.querySelector( 'main' ),
  data: { name: 'world' }
});

// æ›´æ”¹ä¸æ¨¡æ¿ç›¸å…³çš„æ•°æ®
app.set({ name: 'everybody' });

// å¸è½½ç»„ä»¶å¹¶åšä¸€äº›æ¸…ç†
app.destroy();
```

æ­å–œä½ ï¼Œä½ åˆšåˆšå·²ç»äº†è§£äº†ä¸€åŠçš„SvelteAPIï¼

## å…¥é—¨
é€šå¸¸æ¥è¯´ï¼Œè¿™é‡Œä¼šè¯´ä½ éœ€è¦ä½¿ç”¨`<script>`æ ‡ç­¾æŠŠæ¡†æ¶å¼•å…¥åˆ°ä½ çš„é¡µé¢ã€‚ä½†æ˜¯ç”±äºSvelteåœ¨æ„å»ºæ—¶å°±å·²ç»æ‰“åŒ…æˆäº†å¯è¿è¡Œçš„ä»£ç ï¼Œæ‰€ä»¥å®ƒçš„å·¥ä½œæ–¹å¼ä¼šæœ‰æ‰€ä¸åŒã€‚

Svelteçš„æœ€å¥½çš„ä½¿ç”¨æ–¹å¼æ˜¯å°†å…¶é›†æˆåˆ°ä½ çš„æ„å»ºç³»ç»Ÿä¸­ï¼Œè¿™é‡Œæœ‰é’ˆå¯¹`Rollup`ï¼Œ`Browserify`ï¼Œ`Gulp`ç­‰çš„æ‰“åŒ…å·¥å…·ï¼Œ[æ›´å¤šèµ„æ–™](https://github.com/sveltejs/svelte/#svelte)ï¼Œè¯·å‚é˜…è¿™é‡Œè·å–æœ€æ–°çš„åˆ—è¡¨ã€‚

ç°åœ¨ï¼Œä¸ºäº†æ¼”ç¤ºçš„ç›®çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨svelte-cliå‘½ä»¤è¡Œå·¥å…·ã€‚

> ä½ éœ€è¦å®‰è£…[node.js](https://nodejs.org/en/)å¹¶ç†Ÿæ‚‰ä¸€äº›ç®€å•çš„å‘½ä»¤è¡Œæ“ä½œ

é¦–å…ˆï¼Œå®‰è£…`svelte-cli`

```
npm install -g svelte-cli
```

ç„¶åä¸ºé¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹

```
mkdir my-svelte-project
cd my-svelte-project
```

è¿›å…¥`my-svelte-project`æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºä¸€ä¸ª`HelloWorld.html`çš„æ–‡ä»¶ï¼Œå¹¶ä¸”è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š

```html
<h1>Hello {{name}}</h1>
```

ç¼–è¯‘å®ƒ

```
svelte compile --format iife HelloWorld.html > HelloWorld.js
```

`--format iife`æ˜¯æŒ‡ç”Ÿæˆä¸€ä¸ªç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼ï¼Œè¿™æ ·åšå¯ä»¥å…è®¸æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª`<script>`æ ‡ç­¾æ¥ä½¿ç”¨è¿™ä¸ªç»„ä»¶ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼ŒSvelteè¢«ç¼–è¯‘æˆä¸€ä¸ªJavaScriptæ¨¡å—ï¼Œå»ºè®®åœ¨æ›´é«˜çº§çš„åº”ç”¨ä¸­ä½¿ç”¨ï¼Œä½†éœ€åŒæ—¶ä¹Ÿéœ€è¦é¢å¤–çš„æ­¥éª¤ï¼‰ã€‚

åˆ›å»ºä¸€ä¸ª`index.html`é¡µé¢å¹¶ä¸”å¼•å…¥åˆšæ‰ç”Ÿæˆçš„ä»£ç 

```html
<!doctype html>
<html>
<head>
  <title>My first Svelte app</title>
</head>
<body>
  <main></main>
  <script src='HelloWorld.js'></script>
  <script>
    var app = new HelloWorld({
      target: document.querySelector( 'main' ),
      data: {
        name: 'world'
      }
    });
  </script>
</body>
</html>
```

æœ€åï¼Œåœ¨æµè§ˆå™¨é‡Œé¢æ‰“å¼€è¯¥é¡µé¢ï¼Œå¹¶åœ¨æ§åˆ¶å°ä¸­è¾“å…¥`app`å¯ä»¥æŸ¥çœ‹æ›´å¤šAPIã€‚

## ç»„ä»¶API

æ­£å¦‚æˆ‘ä»¬ä¸Šé¢çœ‹åˆ°çš„ï¼Œä½ é€šè¿‡`new`å…³é”®å­—åˆ›å»ºäº†ä¸€ä¸ªç»„ä»¶å®ä¾‹ï¼š

```js
import MyComponent from './MyComponent.html';

const component = new MyComponent({
  // `target` æ˜¯å”¯ä¸€çš„å¿…å¡«å­—æ®µ â€“ ç±»ä¼¼vueä¸­çš„elé…ç½®
  // ç”¨æ¥æè¿°ç»„ä»¶å°†æ¸²æŸ“åœ¨å“ªé‡Œ
  target: document.querySelector( 'main' ),

  // `data` æ˜¯ä¸€ä¸ªé€‰å¡«å­—æ®µã€‚ä¸€ä¸ªç»„ä»¶ä¹Ÿèƒ½æœ‰
  // é»˜è®¤ data â€“ æˆ‘ä»¬ç¨åä¼šæ¥è§¦åˆ°
  data: {
    questions: [
      'life',
      'the universe',
      'everything'
    ],
    answer: 42
  }
});
```

é™¤äº†ä½ æ·»åŠ çš„[è‡ªå®šä¹‰æ–¹æ³•](https://svelte.technology/guide#custom-methods)ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç»„ä»¶å®ä¾‹éƒ½æä¾›å°‘é‡çš„æ–¹æ³•ï¼Œä½ èƒ½æ§åˆ¶è¿™äº›æ–¹æ³•æ“ä½œç»„ä»¶ã€‚

### component.set(data)

è¯¥æ–¹æ³•ä¼šæ ¹æ®ä¼ å…¥çš„æ–°`data`å€¼æ›´æ–°ç»„ä»¶çŠ¶æ€å¹¶å¼•èµ·DOMçš„æ”¹å˜ã€‚`data`å¿…é¡»æ˜¯ä¸€ä¸ªçº¯ç²¹çš„`javascript`å¯¹è±¡ã€‚ä»»ä½•æ²¡æœ‰åŒ…å«åœ¨`data`ä¹‹å†…çš„å±æ€§å°†ä¼šä¿æŒå’ŒåŸæ¥ä¸€æ ·ã€‚

```js
component.set({
  questions: [
    'why is the sky blue?',
    'how do planes fly?',
    'where do babies come from?'
  ],
  answer: 'ask your mother'
});
```

> å¦‚æœä½ ä¹‹å‰ä½¿ç”¨è¿‡`Ractive`ï¼Œè¿™é‡Œä¼šä¸`ractive.set(...)`éå¸¸ç±»ä¼¼ï¼Œä½†æ˜¯ä½ å¿…é¡»å§‹ç»ˆä½¿ç”¨`ractive.set(...)`è€Œä¸èƒ½ä½¿ç”¨`ractive.set('foo', 'bar')`è¿™ç§æ–¹å¼ï¼Œå¹¶ä¸”ä½ ä¸æ˜¯ç›´æ¥ç»™å¯¹è±¡è®¾ç½®å…³é”®å­—ï¼ˆæ¯”å¦‚ï¼Œä¸èƒ½ä½¿ç”¨ES6ä¸­ç”¨{'class':1}è¿™ç§ï¼‰ã€‚å®ƒä¹Ÿéå¸¸ç±»ä¼¼äº`React`çš„`setState`ï¼Œé™¤äº†svelteä¼šå¯¼è‡´åŒæ­¥æ›´æ–°ï¼Œè¿™æ„å‘³ç€DOMæ€»æ˜¯å¤„äºå¯é¢„æµ‹çŠ¶æ€ã€‚

### component.get(key)

è¿”å›å½“å‰`key`çš„å€¼

```
console.log( component.get( 'answer' ) ); // 'ask your mother'
```

è¿™ä¹Ÿä¼šå–å‡º[è®¡ç®—å±æ€§](https://svelte.technology/guide#computed-properties)çš„å€¼


### component.observe(key, callback[, options])

æ­¤æ–¹æ³•å…è®¸ä½ å“åº”çŠ¶æ€æ›´æ”¹ï¼Œç»“åˆç”Ÿå‘½å‘¨æœŸé’©å­å’ŒåŒå‘ç»‘å®šæ—¶è¿™å°†ä¼šç‰¹åˆ«æœ‰ç”¨

```
const observer = component.observe( 'answer', answer => {
  console.log( `the answer is ${answer}` );
});
// ä¼šç«‹å³å‡ºå‘ä¿®æ”¹è¿‡åçš„answer
// -> 'the answer is ask your mother'

component.set({ answer: 'google it' });
// -> 'the answer is google it'

observer.cancel(); // further changes will be ignored
```

å›è°ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå½“å‰å€¼å’Œä¸Šä¸€ä¸ªå€¼ã€‚ï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è°ƒç”¨ç¬¬äºŒä¸ªå‚æ•°ä¼šæ˜¯`undefined`ï¼‰:

```js
thermometer.observe( 'temperature', ( newValue, oldValue ) => {
  if ( oldValue === undefined ) return;
  console.log( `it's getting ${newValue > oldValue ? 'warmer' : 'colder'}` );
});
```

å¦‚æœä½ ä¸å¸Œæœ›åœ¨é¦–æ¬¡æ·»åŠ `observer`æ—¶è§¦å‘å›è°ƒï¼Œä½ å¯ä»¥è®¾ç½®`init:false`ï¼š

```
thermometer.observe( 'temperature', ( newValue, oldValue ) => {
  console.log( `it's getting ${newValue > oldValue ? 'warmer' : 'colder'}` );
}, { init: false });
```

> å¯¹äºå­—ç¬¦ä¸²å’Œæ•°å€¼ç±»å‹çš„å€¼ï¼Œåªæœ‰å½“å€¼æ›´æ”¹çš„æ—¶å€™æ‰ä¼šè§¦å‘`observer`çš„å›è°ƒã€‚ä½†æ˜¯ç”±äºå€¼å¯èƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ•°ç»„ï¼Œè€Œä¼ å…¥çš„å€¼å¦‚æœå¼•ç”¨ä¸ä¹‹å‰æ˜¯ç›¸åŒçš„æ—¶å€™Svelteä¼šè°¨æ…å¤„ç†ï¼ˆå› ä¸ºå¼•ç”¨ç›¸åŒæ²¡åˆ™éœ€è¦åˆ¤æ–­å†…éƒ¨æ˜¯å¦æ¯ä¸ªå€¼éƒ½ç›¸åŒï¼‰ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ è°ƒç”¨`component.set({foo: component.get('foo')})`ï¼Œè€Œ`foo`æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ•°ç»„çš„æ—¶å€™ï¼Œä»»ä½•ä¸€ä¸ª`foo`çš„`observer`éƒ½å°†ä¼šè§¦å‘ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`observer`ä¼šåœ¨DOMæ›´æ–°ä¹‹å‰è¢«è°ƒç”¨ï¼Œè®©ä½ æœ‰æœºä¼šæ‰§è¡Œä»»ä½•å…¶ä»–æ›´æ–°ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹DOMã€‚ åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨DOMå˜æ›´ä¹‹åå†è§¦å‘å›è°ƒï¼Œä¾‹å¦‚ï¼Œå¦‚æœåœ¨DOMæ›´æ–°åéœ€è¦è®¡ç®—å…ƒç´ å¯ä»¥ä½¿ç”¨`deferï¼štrue`ï¼š

```js
function redraw () {
  canvas.width = drawingApp.get( 'width' );
  canvas.height = drawingApp.get( 'height' );
  updateCanvas();
}

drawingApp.observe( 'width', redraw, { defer: true });
drawingApp.observe( 'height', redraw, { defer: true });
```

å¦‚æœéœ€è¦ç›‘å¬åµŒå¥—çš„ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨`refs`:
```html
<Widget ref:widget/>
<script>
  export default {
    oncreate () {
      this.refs.widget.observe( 'xxx', () => {...});
    }
  };
</script>
```

### component.on(eventName, callback)

å…è®¸ä½ å“åº”äº‹ä»¶

```js
const listener = component.on( 'thingHappened', event => {
  console.log( `A thing happened: ${event.thing}` );
});

// some time later...
listener.cancel();
```

### component.fire(eventName, event)

ä¸`component.on(...)`æœ‰å…³ï¼š
```js
component.fire( 'thingHappened', {
  thing: 'this event was fired'
});
```

ä¹ä¸€çœ‹ï¼Œ`component.on(...)`å’Œ`component.fire(...)`ä¸æ˜¯ç‰¹åˆ«æœ‰ç”¨ï¼Œä½†æ˜¯å½“æˆ‘ä»¬äº†è§£åµŒå¥—ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå˜å¾—éå¸¸å¥½ç”¨ã€‚ï¼ˆå› ä¸ºæ²¡æœ‰ç±»ä¼¼Vuexçš„ä¸œè¥¿ç»„ä»¶é—´é€šä¿¡å°±é å®ƒäº†ï¼‰

> `component.on(...)`ä¸`component.observe(...)`çœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒä»¬æœ‰ä¸åŒçš„ç”¨é€”ï¼Œ`Observers`è¢«ç”¨æ¥å“åº”åº”ç”¨çš„æ•°æ®æµçš„å˜åŒ–å’Œä»»ä½•æ—¶å€™æŒç»­çš„å˜åŒ–ï¼Œç„¶è€Œäº‹ä»¶åœ¨å¤„ç†ç¦»æ•£çš„æ—¶åˆ»ä¼šæ›´å¥½ç”¨ï¼Œæ¯”å¦‚ç”¨æˆ·åšäº†ä¸€ä¸ªé€‰æ‹©ï¼Œé€‰æ‹©å¼•å‘äº†å¾ˆå¤šå˜åŠ¨ã€‚

### component.destroy()
æŠŠç»„ä»¶ä»DOMä¸­ç§»é™¤ï¼ŒåŒæ—¶ä¹Ÿä¼šç§»é™¤æ‰€æœ‰åˆ›å»ºçš„`observers`å’Œäº‹ä»¶ç›‘å¬ï¼Œè¿™ä¹Ÿä¼šè§¦å‘ä¸€ä¸ª`destory`äº‹ä»¶ã€‚

```js
component.on( 'destroy', () => {
  alert( 'goodbye!' ); // please don't do this
});

component.destroy();
```

## æ¨¡æ¿è¯­æ³•

`Svelte`ä¸é‡å¤é€ è½®å­ï¼Œå­¦ä¹ `Svelte`æ¨¡æ¿åªéœ€è¦åœ¨`HTML`ï¼Œ`CSS`å’Œ`JavaScript`åŸºç¡€ä¸Šå°‘é‡çš„å­¦ä¹ ä¸€äº›æ–°çŸ¥è¯†å³å¯ã€‚

### æ ‡ç­¾
æ ‡ç­¾å…è®¸ä½ æŠŠæ•°æ®ç»‘å®šåˆ°æ¨¡æ¿ä¸Šï¼Œæ— è®ºä½•æ—¶ä¿®æ”¹æ•°æ®ï¼ˆæ¯”å¦‚ï¼Œåœ¨component.setï¼ˆ...ï¼‰ä¹‹åï¼‰ï¼ŒDOMå°†è‡ªåŠ¨æ›´æ–°ã€‚ä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ä»»ä½•JavaScriptè¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¹Ÿä¼šè‡ªåŠ¨åœ°æ›´æ–°ï¼š

```html
<p>{{a}} + {{b}} = {{a + b}}</p>
```

ä½ è¿˜å¯ä»¥ä½¿ç”¨æ ‡ç­¾å±æ€§

```html
<h1 style='color: {{color}};'>{{color}}</h1>
```

è™½ç„¶ä½¿ç”¨`{{`ã€`}}`åˆ†éš”æ ‡ç­¾ï¼Œä½†Svelteä¸ä½¿ç”¨Mustacheè¯­æ³•ã€‚ æ ‡ç­¾åªæ˜¯JavaScriptè¡¨è¾¾å¼ã€‚

### Triplesï¼ˆç›´æ¥è¾“å‡ºhtmlï¼‰

æ™®é€šçš„åˆ†éš”æ ‡ç­¾å°†ä¼šç”Ÿæˆå­˜æ–‡æœ¬ï¼Œå¦‚æœä½ éœ€è¦å°†è¡¨è¾¾å¼è½¬åŒ–æˆHTMLï¼Œä½ å¯ä»¥æŠŠä»–åŒ…å«åœ¨ä¸‰ä¸ª`{{{`,`}}}`ä¸­

```html
<p>This HTML: {{html}}</p>
<p>Renders as: {{{html}}}</p>
```

ä¸æ™®é€šæ ‡ç­¾ä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨å…¶ä¸­ä½¿ç”¨Javascriptè¡¨è¾¾å¼ï¼Œå¹¶ä¸”å½“æ•°æ®å˜åŒ–çš„æ—¶å€™ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°å†…å®¹

> ä½¿ç”¨ä¸‰ä¸ªèŠ±æ‹¬å·çš„å½¢å¼å°†ä¸ä¼šå¯¹HTMLè¿›è¡Œè½¬ä¹‰ï¼å¦‚æœä½ æƒ³æ˜¾ç¤ºç”¨æˆ·è¾“å…¥ï¼Œä½ æœ‰ä¹‰åŠ¡å…ˆå¯¹æ•°æ®è¿›è¡Œè½¬ä¹‰ï¼Œå¦åˆ™ä½ å¯èƒ½ä¼šé­å—ä¸åŒå½¢å¼çš„æ”»å‡»

### æ¡ä»¶æ¸²æŸ“

é€šè¿‡å°†å…¶åŒ…è£…åœ¨`if`å—æ¥æ§åˆ¶æ¨¡æ¿çš„ä¸€éƒ¨åˆ†æ˜¯å¦è¢«æ¸²æŸ“ã€‚

```html
{{#if user.loggedIn}}
  <a href='/logout'>log out</a>
{{/if}}

{{#if !user.loggedIn}}
  <a href='/login'>log in</a>
{{/if}}
```

ä½ ä¹Ÿå¯ä»¥æŠŠä¸Šé¢ä¸¤ä¸ª`block`é€šè¿‡`{{else}}`åˆå¹¶ï¼š

```html
{{#if user.loggedIn}}
  <a href='/logout'>log out</a>
{{else}}
  <a href='/login'>log in</a>
{{/if}}
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨`{{elseif ...}}`:

```html
{{#if x > 10}}
  <p>{{x}} is greater than 10</p>
{{elseif 5 > x}}
  <p>{{x}} is less than 5</p>
{{else}}
  <p>{{x}} is between 5 and 10</p>
{{/if}}
```

### åˆ—è¡¨æ¸²æŸ“

å¾ªç¯æ•°æ®åˆ—è¡¨

```html
<h1>Cats of YouTube</h1>

<ul>
  {{#each cats as cat}}
    <li><a target='_blank' href='{{cat.video}}'>{{cat.name}}</a></li>
  {{/each}}
</ul>
```

ä½ å¯ä»¥ä½¿ç”¨`name,index`çš„æ–¹å¼æ¥è®¿é—®å½“å‰å…ƒç´ çš„ç´¢å¼•

```js
<div class='grid'>
  {{#each rows as row, y}}
    <div class='row'>
      {{#each columns as column, x}}
        <code class='cell'>
          {{x + 1}},{{y + 1}}:
          <strong>{{row[column]}}</strong>
        </code>
      {{/each}}
    </div>
  {{/each}}
</div>
```

### æŒ‡ä»¤

æœ€åï¼ŒSvelteæ¨¡æ¿è¯­æ³•ä¸åŒäºä¼ ç»ŸHTMLçš„åœ°æ–¹åœ¨äºï¼šæŒ‡ä»¤å…è®¸ä½ æ·»åŠ æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºï¼ŒåŒå‘ç»‘å®šï¼Œ`refs(å¼•ç”¨)`ç­‰ç‰¹æ®Šç”³æ˜ã€‚æˆ‘ä»¬åœ¨åé¢å°†ä¼šé€ä¸€ä»‹ç»ï¼Œä½ ç°åœ¨éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œå¯ä»¥é€šè¿‡`:`å­—ç¬¦çš„æ–¹å¼æ¥è¯†åˆ«æŒ‡ä»¤ï¼š

```html
<p>Count: {{count}}</p>
<button on:click='set({ count: count + 1 })'>+1</button>
```

> ä»æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œ`:`ç”¨æ¥è¡¨ç¤ºHTMLå±æ€§çš„å‘½åç©ºé—´ï¼Œå¦‚æœé‡åˆ°çš„è¯ï¼Œå°†ä¸ä¼šè¢«è§†ä¸ºæŒ‡ä»¤

## æ ·å¼ä½œç”¨åŸŸ

Svelteçš„ä¸€ä¸ªé‡è¦åŸåˆ™å°±æ˜¯ç»„ä»¶æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­å¤ç”¨ï¼Œå› æ­¤å®ƒæœ‰ä¸€ä¸ªç‹¬ç‰¹çš„CSSéš”ç¦»æœºåˆ¶ï¼Œè¿™æ ·å°±ä¸ä¼šæ„å¤–çš„å¹²æ‰°åˆ°ç›¸åŒé€‰æ‹©å™¨çš„å…¶ä»–é¡µé¢äº†

### æ·»åŠ æ ·å¼

ä½ çš„ç»„ä»¶å¯ä»¥æœ‰ä¸€ä¸ª`<style>`æ ‡ç­¾ï¼Œåƒè¿™æ ·ï¼š
```html
<div class='foo'>
  Big red Comic Sans
</div>

<style>
  .foo {
    color: red;
    font-size: 2em;
    font-family: 'Comic Sans MS';
  }
</style>
```

### å¦‚ä½•å·¥ä½œçš„

æ‰“å¼€ç¤ºä¾‹ï¼Œæ£€æŸ¥å…ƒç´ ä»¥æŸ¥çœ‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Œä½ ä¼šå‘ç°ï¼ŒSvelteå·²ç»å‘å…ƒç´ æ·»åŠ äº†ä¸€ä¸ªsvelte-[uniqueid]å±æ€§ã€‚å¹¶ç›¸åº”åœ°è½¬æ¢äº†CSSé€‰æ‹©å™¨ã€‚å› ä¸ºé¡µé¢ä¸Šæ²¡æœ‰å…¶ä»–å…ƒç´ å¯ä»¥å…±äº«è¯¥é€‰æ‹©å™¨ï¼Œæ‰€ä»¥é¡µé¢ä¸Š`class ='foo'`çš„ä»»ä½•å…¶ä»–å…ƒç´ éƒ½ä¸ä¼šå—åˆ°æˆ‘ä»¬çš„æ ·å¼çš„å½±å“ã€‚

è¿™æ¯”é€šè¿‡[Shadow DOM](http://caniuse.com/#search=shadow%20dom)å®ç°ç›¸åŒçš„æ•ˆæœè¦ç®€å•å¾—å¤šï¼Œå¹¶ä¸”åœ¨æ²¡æœ‰polyfillsçš„åœ°æ–¹ä½¿ç”¨ã€‚

> Svelteå°†ä¼šå‘å«æœ‰è¯¥ç»„ä»¶çš„é¡µé¢æ·»åŠ ä¸€ä¸ª<style>æ ‡ç­¾ã€‚å¦‚æœæ‚¨çš„ç½‘ç«™å…·æœ‰[å†…å®¹å®‰å…¨ç­–ç•¥](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)ï¼Œåˆ™åŠ¨æ€æ·»åŠ æ ·å¼å¯èƒ½æ˜¯ä¸å¯èƒ½çš„ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨[æœåŠ¡å™¨æ¸²æŸ“CSS](https://svelte.technology/guide#rendering-css)ã€‚å¹¶åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨`cssï¼šfalse`é€‰é¡¹ï¼Œæˆ–ä½¿ç”¨CLIçš„`--no-css`æ“ä½œã€‚

### çº§è”è§„åˆ™

é€šå¸¸çš„çº§è”æœºåˆ¶ä»ç„¶é€‚ç”¨ï¼Œä»»ä½•å…¨å±€çš„`.foo`æ ·å¼ä»ç„¶å¯ä»¥åº”ç”¨ï¼Œå¦‚æœæˆ‘ä»¬çš„æ¨¡æ¿å…·æœ‰åµŒå¥—çš„ç»„ä»¶ä¸`class='foo'`å…ƒç´ ï¼Œå®ƒä»¬å°†ç»§æ‰¿æˆ‘ä»¬çš„æ ·å¼ã€‚

> æ ·å¼éš”ç¦»ä¸æ˜¯åŠ¨æ€çš„ï¼Œç»„ä»¶æ˜¯ä¸€ä¸ªå·²ç»ç¼–è¯‘å¥½çš„å®ä¾‹ï¼Œå› æ­¤ä½ ä¸èƒ½åœ¨CSSä¸­ä½¿ç”¨`{{tag}}`.

## è¡Œä¸º

é™¤äº†æ ·å¼ä¸æ¨¡æ¿ä¹‹å¤–ï¼Œç»„ä»¶è¿˜å¯ä»¥å°è£…è¡Œä¸ºé€»è¾‘ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª`<script>`æ ‡ç­¾å…ƒç´ å¹¶å¯¼å‡ºäº†ä¸€ä¸ªå¯¹è±¡

```js
<div>
  <!-- template goes here -->
</div>

<script>
  export default {
    // behaviours go here
  };
</script>
```

### é»˜è®¤æ•°æ®

é€šå¸¸ï¼Œç»„ä»¶å…·æœ‰é»˜è®¤æ•°æ®æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå®ƒå°†ä¼šé€šè¿‡ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼æ¥è¿”å›ä¸€ä¸ªçº¯ç²¹çš„JSå¯¹è±¡

```html
<p>Count: {{count}}</p>
<button on:click='set({ count: count + 1 })'>+1</button>

<script>
  export default {
    data () {
      return {
        count: 0
      };
    }
  };
</script>
```

å®ä¾‹åŒ–`new Component(...)`ä¼ å…¥çš„æ•°æ®ä¼˜å…ˆçº§é«˜äºé»˜è®¤å€¼

> ä¸Šé¢çš„ä»£ç ä¸­ä½¿ç”¨äº†ES6çš„è¯­æ³•,Svelteä¼šç”ŸæˆES5çš„ä»£ç è¿è¡Œåœ¨å„ç§å¹³å°ä¸Šï¼Œå®ƒæœ¬èº«ä¸ä¼šå°†ES6è½¬åŒ–æˆES5ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³ä½¿ç”¨ES6çš„è¯­æ³•ï¼Œä½ éœ€è¦äº†ä½ çš„æ„å»ºé¡¹ç›®ä¸­ä½¿ç”¨[Babel](https://babeljs.io/)

### è®¡ç®—å±æ€§

é€šå¸¸ä½ çš„ç¨‹åºä½¿ç”¨çš„æŸä¸ªå€¼ä¾èµ–äº†å…¶ä»–çš„æŸä¸ªå€¼ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ‚¨å¯èƒ½æœ‰ä¸€ä¸ªè¿‡æ»¤çš„åˆ—è¡¨ï¼Œè¿™å–å†³äºåˆ—è¡¨å’Œè¿‡æ»¤å™¨ã€‚é€šå¸¸åœ¨JavaScriptä¸­ï¼Œå½“ä»»ä½•ä¾èµ–å…³ç³»å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‚¨å¿…é¡»æ·»åŠ é€»è¾‘æ¥æ›´æ–°ä¾èµ–å±æ€§ã€‚è¿™æ ·æ˜¯å¸¸è§çš„é”™è¯¯æ¥æºï¼Œéšç€åº”ç”¨çš„é€æ¸æ‰©å¤§ï¼Œå®ƒä¼šå˜å¾—åŸæ¥è¶Šç³Ÿç³•ã€‚

Svelteå…è®¸æ‚¨åœ¨è®¡ç®—å±æ€§ä¸­è¡¨è¾¾è¿™äº›ä¾èµ–å…³ç³»ï¼Œæ¯å½“è¿™äº›ä¾èµ–å…³ç³»æ›´æ”¹æ—¶ï¼Œå®ƒä»¬å°†é‡æ–°è®¡ç®—ï¼š

```js
<p>
  The time is
  <strong>{{hours}}:{{minutes}}:{{seconds}}</strong>
</p>

<script>
  export default {
    data () {
      return {
        time: new Date()
      };
    },

    computed: {
      hours: time => time.getHours(),
      minutes: time => time.getMinutes(),
      seconds: time => time.getSeconds()
    }
  };
</script>
```

æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰Svelteï¼Œ`hours`ï¼Œ`minutes`ï¼Œ`seconds`éƒ½ä¾èµ–timeï¼Œ`time`ä¼šä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°ä¸­ï¼Œè‡³äºä¾èµ–å…³ç³»è¿½è¸ªçš„è¿‡ç¨‹ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™è§£å†³

> `computed`å­—æ®µ**å¿…é¡»**æ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡ï¼ŒåŒæ—¶å±æ€§å¿…é¡»éƒ½æ˜¯å‡½æ•°æˆ–è€…ç®­å¤´å‡½æ•°è¡¨è¾¾å¼

### ç”Ÿå‘½å‘¨æœŸé’©å­

Svelteæä¾›ä¸¤ä¸ªæ§åˆ¶é€»è¾‘çš„ç”Ÿå‘½å‘¨æœŸé’©å­`oncreate`ï¼Œ`ondestory`ï¼š

```js
<p>
  The time is
  <strong>{{hours}}:{{minutes}}:{{seconds}}</strong>
</p>

<script>
  export default {
    oncreate () {
      this.interval = setInterval( () => {
        this.set({ time: new Date() });
      }, 1000 );
    },

    ondestroy () {
      clearInterval( this.interval );
    },

    data () {
      return {
        time: new Date()
      };
    },

    computed: {
      hours: time => time.getHours(),
      minutes: time => time.getMinutes(),
      seconds: time => time.getSeconds()
    }
  };
</script>
```

### Helpers

Helpersæ˜¯ä¸€ä¸ªå°å·§çš„å‡½æ•°ï¼Œå¯ä»¥ç”¨äºæ¨¡æ¿ï¼Œä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿åˆ†é’Ÿå’Œç§’æ—¶åˆ»éƒ½æ˜¯ä¸¤ä½çš„ï¼Œæˆ‘ä»¬éœ€è¦è‡ªåŠ¨è¡¥0ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªåä¸º`leftPad`çš„Helper

```js
<p>
  The time is
  <strong>{{hours}}:{{leftPad(minutes, 2, '0')}}:{{leftPad(seconds, 2, '0')}}</strong>
</p>

<script>
  import leftPad from 'left-pad';

  export default {
    helpers: {
      leftPad
    },

    oncreate () {
      this.interval = setInterval( () => {
        this.set({ time: new Date() });
      }, 1000 );
    },

    ondestroy () {
      clearInterval( this.interval );
    },

    data () {
      return {
        time: new Date()
      };
    },

    computed: {
      hours: time => time.getHours(),
      minutes: time => time.getMinutes(),
      seconds: time => time.getSeconds()
    }
  };
</script>
```

å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨è®¡ç®—å±æ€§ä¸­ä½¿ç”¨leftPadï¼Œè€Œä¸æ˜¯åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚ä»€ä¹ˆæ—¶å€™ä½ åº”è¯¥ä½¿ç”¨Helperè¿˜æ˜¯è®¡ç®—å±æ€§ï¼Œè¿™ç‚¹å¹¶æ²¡æœ‰ç¡¬æ€§è§„å®šï¼Œä¹Ÿæ²¡æœ‰è¡¨ç¤ºå“ªä¸€ä¸ªæ¯”è¾ƒå¿«çš„è§„åˆ™ï¼Œä½ å¦‚ä½•åšï¼Œå–å†³äºä½ çš„ç»„ä»¶æ€æ ·å®¹æ˜“è®©ä¸‹ä¸€ä¸ªå¼€å‘è€…æ›´å®¹æ˜“ç†è§£ã€‚

> helper å‡½æ•°åº”è¯¥æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ¢å¥è¯è¯´å°±æ˜¯åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸åº”è¯¥äº§ç”Ÿå‰¯ä½œç”¨ï¼Œè€Œä»–çš„è¿”å›å€¼ä¹Ÿä»…ä»…åªå’Œä¼ å…¥å‚æ•°æœ‰å…³ã€‚


### è‡ªå®šä¹‰æ–¹æ³•

é™¤äº†[å†…ç½®çš„æ–¹æ³•](https://svelte.technology/guide#component-api)ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„æ–¹æ³•ã€‚

```html
<script>
  export default {
    methods: {
      say: function ( message ) {
        alert( message ); // again, please don't do this
      }
    }
  };
</script>
```

è¿™äº›æ–¹æ³•å°†ä¼šæˆä¸ºç»„ä»¶APIçš„ä¸€éƒ¨åˆ†ã€‚

```js
import MyComponent from './MyComponent.html';

var component = new MyComponent({
  target: document.querySelector( 'main' )
});

component.say( 'ğŸ‘‹' );
```

ä»»ä½•æ–¹æ³•ï¼Œéƒ½èƒ½è¢«å†…éƒ¨çš„äº‹ä»¶[å¤„ç†å‡½æ•°](https://svelte.technology/guide#event-handlers)è°ƒç”¨ã€‚

```js
<button on:click='say("hello")'>say hello!</button>
```

### è‡ªå®šä¹‰äº‹ä»¶å¤„ç†

æˆ‘ä»¬è¿‡åä¼šå­¦ä¹ [äº‹ä»¶å¤„ç†](https://svelte.technology/guide#event-handlers)ï¼Œå¦‚æœä½ éœ€è¦ï¼Œå¯ä»¥å…ˆè·³è¿‡è¿™é‡Œï¼Œæœ€åå†å›è¿‡å¤´æ¥çœ‹ï¼

å¤§å¤šæ•°æ—¶å€™ï¼Œä½ å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„DOMäº‹ä»¶ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä½ å¯èƒ½éœ€è¦è‡ªå®šä¹‰çš„æ—¶é—´å»å¤„ç†æ‰‹åŠ¿ä¹‹ç±»çš„æ“ä½œã€‚

è‡ªå®šä¹‰äº‹ä»¶åªæ˜¯å°†èŠ‚ç‚¹å’Œå›è°ƒä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå…·æœ‰`destroy`æ–¹æ³•çš„å¯¹è±¡ï¼Œå½“è¯¥å…ƒç´ ä»é¡µé¢ä¸­åˆ é™¤æ—¶ï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨ï¼š

```html
<button on:longpress='set({ done: true })'>click and hold</button>

{{#if done}}
  <p>clicked and held</p>
{{/if}}

<script>
  export default {
    events: {
      longpress ( node, callback ) {
        function onmousedown ( event ) {
          const timeout = setTimeout( () => callback( event ), 1000 );

          function cancel () {
            clearTimeout( timeout );
            node.removeEventListener( 'mouseup', cancel, false );
          }

          node.addEventListener( 'mouseup', cancel, false );
        }

        node.addEventListener( 'mousedown', onmousedown, false );

        return {
          destroy () {
            node.removeEventListener( 'mousedown', onmousedown, false );
          }
        };
      }
    }
  };
</script>
```

### å‘½åç©ºé—´

å‡è®¾ç»„ä»¶åœ¨HTMLå‘½åç©ºé—´ä¸­ï¼Œå¦‚æœä½ çš„ç»„ä»¶æ˜¯è®¾è®¡ç»™`<svg>`å…ƒç´ ä½¿ç”¨çš„ï¼Œåˆ™éœ€è¦æŒ‡å®šå‘½åç©ºé—´ã€‚

App.html

```html
<svg viewBox='0 0 1000 1000' style='width: 100%; height: 100%;'>
  <SmileyFace x='70' y='280' size='100' fill='#f4d9c7'/>
  <SmileyFace x='800' y='250' size='150' fill='#40250f'/>
  <SmileyFace x='150' y='700' size='110' fill='#d2aa7a'/>
  <SmileyFace x='875' y='730' size='130' fill='#824e2e'/>
  <SmileyFace x='450' y='500' size='240' fill='#d2b198'/>
</svg>

<script>
  import SmileyFace from './SmileyFace.html';

  export default {
    components: { SmileyFace }
  };
</script>

```

SmileyFace.html
```html
<!-- CC-BY-SA â€” https://commons.wikimedia.org/wiki/File:718smiley.svg -->
<g transform='translate({{x}},{{y}}) scale({{size / 366.5}})'>
  <circle r="366.5"/>
  <circle r="336.5" fill="{{fill}}"/>
  <path d="m-41.5 298.5c-121-21-194-115-212-233v-8l-25-1-1-18h481c6 13 10 27 13 41 13 94-38 146-114 193-45 23-93 29-142 26z"/>
  <path d="m5.5 280.5c52-6 98-28 138-62 28-25 46-56 51-87 4-20 1-57-5-70l-423-1c-2 56 39 118 74 157 31 34 72 54 116 63 11 2 38 2 49 0z" fill="#871945"/>
  <path d="m-290.5 -24.5c-13-26-13-57-9-85 6-27 18-52 35-68 21-20 50-23 77-18 15 4 28 12 39 23 18 17 30 40 36 67 4 20 4 41 0 60l-6 21z"/>
  <path d="m-132.5 -43.5c5-6 6-40 2-58-3-16-4-16-10-10-14 14-38 14-52 0-15-18-12-41 6-55 3-3 5-5 5-6-1-4-22-8-34-7-42 4-57.6 40-66.2 77-3 17-1 53 4 59h145.2z" fill="#fff"/>
  <path d="m11.5 -23.5c-2-3-6-20-7-29-5-28-1-57 11-83 15-30 41-52 72-60 29-7 57 0 82 15 26 17 45 49 50 82 2 12 2 33 0 45-1 10-5 26-8 30z"/>
  <path d="m198.5 -42.5c4-5 5-34 4-50-2-14-6-24-8-24-1 0-3 2-6 5-17 17-47 13-58-9-7-16-4-31 8-43 4-4 7-8 7-9 0 0-4-2-8-3-51-17-105 20-115 80-3 15 0 43 3 53z" fill="#fff"/>
  <path d="m137.5 223.5s-46 40-105 53c-66 15-114-7-114-7s14-76 93-95c76-18 126 49 126 49z" fill="#f9bedd"/>
</g>

<script>
  export default {
    // you can either use the shorthand 'svg', or the full
    // namespace: 'http://www.w3.org/2000/svg'. (I know
    // which one I prefer.)
    namespace: 'svg',

    data () {
      return {
        x: 100,
        y: 100,
        size: 100
      };
    }
  };
</script>
```

## åµŒå¥—ç»„ä»¶

é™¤äº†åµŒå¥—å…ƒç´ ï¼ˆæ¡ä»¶æ¸²æŸ“ï¼Œåˆ—è¡¨æ¸²æŸ“ï¼‰ï¼ŒSvelteç»„ä»¶å¯ä»¥è¿˜åŒ…å«å…¶ä»–Svelteç»„ä»¶ã€‚

```html
<div class='widget-container'>
  <Widget foo bar='static' baz='{{dynamic}}'/>
</div>

<script>
  import Widget from './Widget.html';

  export default {
    data () {
      return {
        dynamic: 'this can change'
      }
    },

    components: {
      Widget
    }
  };
</script>
```

ä¸Šé¢çš„ä¾‹å­ç­‰åŒäºä¸‹é¢çš„å†…å®¹ã€‚

```html
import Widget from './Widget.html';

const widget = new Widget({
  target: document.querySelector( '.widget-container' ),
  data: {
    foo: true,
    bar: 'static',
    baz: 'this can change'
  }
});
```

Svelteå°†ç¡®ä¿åœ¨çˆ¶ç»„ä»¶`baz`ä¸­`dynamic`çš„å€¼ä¼šè¢«åŒæ­¥ï¼Œå¹¶ä¸”åœ¨çˆ¶ç»„ä»¶è¢«é”€æ¯æ—¶å…ˆé”€æ¯å­ç»„ä»¶ã€‚

> ç»„ä»¶åç§°åº”è¯¥æŒ‰ç…§javascriptæ„é€ å‡½æ•°çš„å½¢å¼çº¦å®šé¦–å­—æ¯å¤§å†™ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§åŒºåˆ†å…ƒç´ å’Œæ¨¡æ¿çš„ç®€å•æ–¹æ³•ã€‚

### Yield tags

ç»„ä»¶å¯ä»¥åŒ…å« `{{yeild}}` æ ‡ç­¾ï¼Œæ¥æ”¯æŒçˆ¶ç»„ä»¶æ’ä½å†…å®¹ã€‚

APP.html
```html
{{#if showModal}}
  <Modal on:destroy='set({ showModal: false })'>
    <h2>Hello!</h2>
    <p>This is a modal dialog box. it can contain anything</p>
  </Modal>
{{else}}
  <button on:click='set({ showModal: true })'>show modal</button>
{{/if}}

<script>
  import Modal from './Modal.html';

  export default {
    components: { Modal }
  };
</script>
```

modal.html
```html
<div class='modal-background' on:click='destroy()'></div>

<div class='modal'>
  {{yield}} <!-- content is injected here -->
  <button on:click='destroy()'>close modal</button>
</div>

<style>
  .modal-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.3);
  }

  .modal {
    position: absolute;
    left: 50%;
    top: 50%;
    width: calc(100% - 4em);
    max-width: 32em;
    transform: translate(-50%,-50%);
    padding: 1em;
    border-radius: 0.2em;
    background: white;
    text-align: center;
  }
</style>
```

### <:Self> tags

æœ‰æ—¶å€™ä¸€ä¸ªç»„ä»¶éœ€è¦èƒ½å¤ŸåµŒå¥—è‡ªèº«ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªæ ‘çŠ¶çš„æ•°æ®ç»“æ„ã€‚åœ¨Svelteï¼Œè¿™æ˜¯é€šè¿‡<ï¼šSelf>æ ‡ç­¾å®Œæˆçš„ï¼š

```html
{{#if countdown > 0}}
  <p>{{countdown}}</p>
  <:Self countdown='{{countdown - 1}}'/>
{{else}}
  <p>liftoff!</p>
{{/if}}
```

### <:Window> tags

ç‰¹æ®Šçš„<ï¼šWindow>æ ‡ç­¾ä¸ºæ‚¨æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥å‘çª—å£å£°æ˜æ€§åœ°æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨ã€‚å½“ç»„ä»¶è¢«é”€æ¯æ—¶ï¼Œäº‹ä»¶ä¾¦å¬å™¨å°†è¢«è‡ªåŠ¨åˆ é™¤ã€‚

```html
<:Window on:keydown='set({ key: event.key, keyCode: event.keyCode })'/>

{{#if key}}
  <p><kbd>{{key === ' ' ? 'Space' : key}}</kbd> (code {{keyCode}})</p>
{{else}}
  <p>click in this window and press any key</p>
{{/if}}

<style>
  kbd {
    background-color: #eee;
    border: 2px solid #f4f4f4;
    border-right-color: #ddd;
    border-bottom-color: #ddd;
    font-size: 2em;
    margin: 0 0.5em 0 0;
    padding: 0.5em 0.8em;
    font-family: Inconsolata;
  }
</style>
```

ç›®å‰ä¸ºæ­¢ï¼Œä½ å¯ä»¥ç»‘å®š`innerWidth`ï¼Œ`outerWidth`ï¼Œ`innerHeight`ï¼Œ`outerHeight`ï¼Œ`scrollX`å’Œ`scrollY`

```html
<:Window bind:scrollY='y'/>

<div class='background'></div>
<p class='fixed'>user has scrolled {{y}} pixels</p>

<style>
  .background {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 9999px;
    background: linear-gradient(to bottom, #7db9e8 0%,#0a1d33 100%);
  }

  .fixed {
    position: fixed;
    top: 1em;
    left: 1em;
    color: white;
  }
</style>
```

## å…ƒç´ æŒ‡ä»¤

Svelteçš„æŒ‡ä»¤æ˜¯æŒ‡å…ƒç´ æˆ–ç»„ä»¶çº§æŒ‡ä»¤ï¼Œå®ƒä»¬çœ‹èµ·æ¥åƒå±æ€§ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ª`:`å­—ç¬¦ã€‚

### äº‹ä»¶å¤„ç†ç¨‹åº

åœ¨å¤§å¤šæ•°åº”ç”¨ä¸­ï¼Œä½ éœ€è¦å“åº”ç”¨æˆ·çš„æ“ä½œã€‚åœ¨Svelteä¸­ï¼Œè¿™æ˜¯é€šè¿‡æŒ‡ä»¤`on:[event]`æ¥å®ç°çš„ã€‚

```html
<p>Count: {{count}}</p>
<button on:click='set({ count: count + 1 })'>+1</button>
```

å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒSvelteä½¿ç”¨æä¾›çš„å‚æ•°æ¥è°ƒç”¨`component.set(...)`ã€‚ä½ å¯ä»¥è°ƒç”¨å±äºç»„ä»¶çš„ä»»ä½•ä¸€ä¸ªæ–¹æ³•ï¼ˆæ— è®ºæ˜¯[å†…ç½®](https://svelte.technology/guide#component-api)çš„è¿˜æ˜¯[è‡ªå®šä¹‰](https://svelte.technology/guide#custom-methods)çš„ï¼‰ä»¥åŠèŒƒå›´å†…çš„ä»»ä½•æ•°æ®å±æ€§ï¼ˆåŒ…æ‹¬è®¡ç®—å±æ€§ï¼‰ã€‚

```html
<p>Select a category:</p>

{{#each categories as category}}
  <button on:click='select( category )'>select {{category}}</button>
{{/each}}

<script>
  export default {
    data () {
      return {
        categories: [
          'animal',
          'vegetable',
          'mineral'
        ]
      }
    },

    methods: {
      select ( name ) {
        alert( `selected ${name}` );
      }
    }
  };
</script>

```

ä½ ä¹Ÿå¯ä»¥åœ¨è°ƒç”¨è¿‡ç¨‹ä¸­è®¿é—®`event`å¯¹è±¡ï¼š
```html
<div on:mousemove='set({ x: event.clientX, y: event.clientY })'>
  coords: {{x}},{{y}}
</div>

<style>
  div {
    border: 1px solid purple;
    width: 100%;
    height: 100%;
  }
</style>
```

ç›®æ ‡èŠ‚ç‚¹å¯ä»¥ä½¿ç”¨`this`æ¥å¼•ç”¨ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥è¿™æ ·åšã€‚

```js
<input on:focus='this.select()'>
```

### è‡ªå®šä¹‰äº‹ä»¶

ä½ å¯ä»¥å®šä¹‰ä½ è‡ªå·±çš„è‡ªå®šä¹‰äº‹ä»¶æ¥å¤„ç†å¤æ‚çš„ç”¨æˆ·äº¤äº’ï¼Œå¦‚æ‹–æ‹½å’Œæ»‘åŠ¨ã€‚æ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒæœ‰å…³[è‡ªå®šä¹‰äº‹ä»¶å¤„ç†ç¨‹åº](https://svelte.technology/guide#custom-event-handlers)çš„éƒ¨åˆ†ã€‚


### ç»„ä»¶çš„äº‹ä»¶

å¯¹äº[åµŒå¥—ç»„ä»¶](https://svelte.technology/guide#nested-components)å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ï¼Œä½¿ç”¨äº‹ä»¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹å¼ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ—©æœŸçš„ä¾‹å­ï¼Œä½†æ˜¯æŠŠå®ƒå˜æˆäº†ä¸€ä¸ª`<CategoryChooser>`ç»„ä»¶ï¼š

```html
<!-- CategoryChooser.html -->
<p>Select a category:</p>

{{#each categories as category}}
  <button on:click='fire( "select", { category } )'>select {{category}}</button>
{{/each}}

<script>
  export default {
    data () {
      return {
        categories: [
          'animal',
          'vegetable',
          'mineral'
        ]
      }
    }
  };
</script>
```

å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œç»„ä»¶å°†ä¼šè§¦å‘selectäº‹ä»¶ï¼Œäº‹ä»¶å¯¹è±¡å…·æœ‰`category`å±æ€§ï¼Œä»»ä½•åµŒå¥—äº†`<CategoryChooser>`çš„ç»„ä»¶éƒ½èƒ½åƒå¦‚ä¸‹çš„æ–¹å¼ç›‘å¬è¯¥äº‹ä»¶ï¼š

```html
<CategoryChooser on:select='playTwentyQuestions( event.category )'/>

<script>
  import CategoryChooser from './CategoryChooser.html';

  export default {
    components: {
      CategoryChooser
    },

    methods: {
      playTwentyQuestions ( category ) {
        // TODO implement
      }
    }
  };
</script>
```

### Refsï¼ˆå¼•ç”¨ï¼‰

å¼•ç”¨æ˜¯å­˜å‚¨å¯¹ç‰¹å®šçš„DOMèŠ‚ç‚¹æˆ–ç»„ä»¶çš„ä¸€ç§æ–¹ä¾¿çš„é€”å¾„ï¼Œé€šè¿‡`ref:[name]`ç”³æ˜ä¸€ä¸ª`ref`,å¹¶èƒ½åœ¨ç»„ä»¶ä¸­é€šè¿‡`this.ref.[name]`æ¥è®¿é—®åˆ°ä»–ï¼š

```html
<canvas ref:canvas width='200' height='200'></canvas>

<script>
  export default {
    oncreate () {
      const canvas = this.refs.canvas;
      const ctx = canvas.getContext( '2d' );

      let destroyed = false;
      this.on( 'destroy', () => destroyed = true );

      function loop () {
        if ( destroyed ) return;
        requestAnimationFrame( loop );

        const imageData = ctx.getImageData( 0, 0, canvas.width, canvas.height );

        for ( let p = 0; p < imageData.data.length; p += 4 ) {
          const i = p / 4;
          const x = i % canvas.width;
          const y = i / canvas.height >>> 0;

          const t = window.performance.now();

          const r = 64 + ( 128 * x / canvas.width ) + ( 64 * Math.sin( t / 1000 ) );
          const g = 64 + ( 128 * y / canvas.height ) + ( 64 * Math.cos( t / 1000 ) );
          const b = 128;

          imageData.data[ p + 0 ] = r;
          imageData.data[ p + 1 ] = g;
          imageData.data[ p + 2 ] = b;
          imageData.data[ p + 3 ] = 255;
        }

        ctx.putImageData( imageData, 0, 0 );
      }

      loop();
    }
  }
</script>
```

> ç”±äºåªæœ‰ä¸€ä¸ªå…ƒç´ æˆ–ç»„ä»¶å¯ä»¥ä½¿ç”¨ç»™å®šçš„å¼•ç”¨ï¼Œå› æ­¤è¯·å‹¿åœ¨`{{#each}}`ä¸­ä½¿ç”¨å®ƒä»¬ï¼Œä¸è¿‡ä½ ä¾ç„¶å¯ä»¥åœ¨`{{#if}}`ä¸­ä½¿ç”¨ã€‚

### åŒå‘æ•°æ®ç»‘å®š

ç›®å‰æµè¡Œçš„è§‚ç‚¹è®¤ä¸ºï¼šåº”è¯¥é¿å…åœ¨åœºæ™¯ä¸­ä½¿ç”¨åŒå‘ç»‘å®šï¼Œå› ä¸ºå®ƒä¼šå¼•èµ·å„ç§éš¾ä»¥è°ƒè¯•çš„BUGï¼Œå¹¶é™ä½ç¨‹åºè¿è¡Œæ•ˆç‡ï¼Œå¹¶ä¸”è‡ªä¸Šè€Œä¸‹çš„å•å‘æ•°æ®æµæ›´å®¹æ˜“è®©äººç†è§£ã€‚è¿™å…¶å®æ˜¯ä¸€ä¸ªé«˜çº§çš„åºŸè¯ã€‚
ç¡®å®åŒå‘ç»‘å®šåšå¾—å¾ˆç³Ÿç³•ï¼Œæœ‰å„ç§å„æ ·çš„é—®é¢˜ï¼Œè€Œä¸”å¤§å‹åº”ç”¨å› ä¸ºæ·±åº¦åµŒå¥—å¯èƒ½ä¼šå¯¼è‡´çŠ¶æ€å˜åŒ–æ—¶å½±å“åˆ°äº†ä¸åº”ç”¨ä¸ç›¸å…³çš„éƒ¨åˆ†ã€‚æ‰€ä»¥å®ƒä»¬ä»ç¦æ­¢ç»„ä»¶æ·±åº¦åµŒå¥—çš„çº¦æŸä¸­å—ç›Šã€‚
ä½†æ˜¯å½“æ­£ç¡®ä½¿ç”¨åŒå‘ç»‘å®šæ—¶ï¼Œå®ƒèƒ½æå¤§çš„ç®€åŒ–å¾ˆå¤šäº‹æƒ…ã€‚

ä½¿ç”¨`bind:[attribute]`æ¥ç”³æ˜æŒ‡ä»¤ã€‚

```html
<input bind:value='name' placeholder='enter your name'>
<p>Hello {{name || 'stranger'}}!</p>
```

> åŒå‘ç»‘å®šè¿˜æœªèƒ½å®Œå…¨çš„å®ç°ï¼Œåç»­ä¼šå®ç°å…¨å¥—å¯ç”¨çš„ç»‘å®šåŠŸèƒ½ã€‚

é™¤äº†DOMå…ƒç´ ï¼Œä½ è¿˜å¯ä»¥ç»™ç»„ä»¶ç»‘å®šæ•°æ®å±æ€§ã€‚

```
<CategoryChooser bind:category='category'/>
```

å¦‚æœç»‘å®šçš„å±æ€§å’Œæ•°æ®å…±ç”¨ä¸€ä¸ªåå­—ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ç®€å†™ï¼š

```html
<CategoryChooser bind:category/>
```

ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„åœ¨è¡¨å•ä¸­ä½¿ç”¨åŒå‘ç»‘å®šçš„ä¾‹å­ã€‚

```html
<form on:submit='handleSubmit( event )'>
  <input bind:value='test' type='text'>
  <button type='submit'>Store</button>
</form>

<script>
export default {
  methods: {
    handleSubmit: function ( event ) {
      // prevent the page from reloading
      event.preventDefault();

      var value = this.get( 'test' );
      console.log( 'value', value );
    }
  }
};
</script>
```

## æ’ä»¶

todo...ï¼ˆä½œè€…å†™çš„todoï¼‰

## æœåŠ¡ç«¯æ¸²æŸ“

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´éƒ½åœ¨è®¨è®ºåœ¨æµè§ˆå™¨å®¢æˆ·ç«¯ä¸Šåˆ›å»ºSvelteç»„ä»¶ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥åœ¨Node.jsä¸­æ¸²æŸ“Svelteç»„ä»¶ã€‚è¿™å¯ä»¥è®©ä½ æ„Ÿåˆ°æ›´å¥½çš„æ€§èƒ½ä¸Šçš„æå‡ï¼Œåº”ç”¨çš„é¡µé¢åœ¨ä¸‹è½½çš„æ—¶å€™å°±å¯ä»¥å¼€å§‹æ¸²æŸ“äº†ï¼Œè¿™ä¸ªåŠ¨ä½œæ¯”ä»»ä½•javascriptä»£ç æ‰§è¡Œéƒ½è¦æ—©ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™ä¹Ÿåˆ©äºSEOï¼Œå¯¹äºé‚£äº›å› å„ç§åŸå› ä¸èƒ½è¿è¡Œjavascriptçš„æµè§ˆå™¨æ¥è¯´ä¹Ÿæ˜¯æœ‰åˆ©çš„ã€‚

### æ¸²æŸ“HTML

è¦æƒ³ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆæ³¨å†Œå®ƒï¼Œè¿™æ„å‘³ç€å½“ä½ `require`ä½ çš„`.html`ç»„ä»¶çš„æ—¶å€™ï¼Œå®ƒå·²ç»è¢«æœåŠ¡ç«¯æ¸²æŸ“ç¼–è¯‘å™¨æ‹¦æˆªåˆ°äº†ï¼š

```js
require( 'svelte/ssr/register' );
```

åœ¨è¿™ä¹‹åï¼Œä½ å¯ä»¥è¿™æ ·åŠ è½½ç»„ä»¶ï¼š
```js
const thing = require( './components/Thing.html' );
```

ç»„ä»¶åœ¨Node.jsä¸­å…·æœ‰ä¸åŒçš„API,åˆ›å»ºçš„å®ä¾‹æ²¡æœ‰`set(...)`å’Œ`get(...)`æ–¹æ³•ã€‚ç»„ä»¶æ˜¯ä¸€ä¸ªæ‹¥æœ‰`render(data)`æ–¹æ³•çš„å¯¹è±¡ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›HTMLï¼Œæ•°æ®å¯¹è±¡`data`ä¸åœ¨æµè§ˆå™¨ä¸­å®ä¾‹åŒ–ç»„ä»¶æ—¶ä½¿ç”¨çš„ä¸€æ ·çš„ï¼Œæ˜¯å¯é€‰çš„ï¼š

```js
const data = { answer: 42 };
const html = thing.render( data );
```

ä»»ä½•[é»˜è®¤æ•°æ®](https://svelte.technology/guide#default-data)ï¼Œ[è®¡ç®—å±æ€§](https://svelte.technology/guide#computed-properties)ï¼Œ[åŠ©æ‰‹](https://svelte.technology/guide#helpers)ï¼Œ[åµŒå¥—ç»„ä»¶](https://svelte.technology/guide#nested-components)éƒ½èƒ½æŒ‰ç…§é¢„æœŸå·¥ä½œã€‚


> SSRç¼–è¯‘å™¨å°†ä¸ºä½ çš„æ¯ä¸ªç»„ä»¶ç”Ÿæˆä¸€ä¸ªCommonJSæ¨¡å—ï¼Œè¿™æ„å‘³ç€å¯¼å…¥å’Œå¯¼å‡ºè¯­å¥å°†ä¼šè½¬åŒ–ä¸º`require`å’Œ`module.exports`ç­‰é€‰é¡¹ã€‚å¦‚æœä½ çš„ç»„ä»¶ä¾èµ–äº†éç»„ä»¶ï¼Œåˆ™ä»–ä»¬å¿…é¡»åœ¨Nodeä¸­ä½œä¸ºCommonJSæ¨¡å—ã€‚å¦‚æœä½¿ç”¨äº†ES2015æ¨¡å—ï¼Œå»ºè®®ä½ å°†å…¶è‡ªåŠ¨è½¬åŒ–æˆCommonJSã€‚

### æ¸²æŸ“CSS

ä½ ä¹Ÿå¯ä»¥æ¸²æŸ“ç»„ä»¶[éš”ç¦»](https://svelte.technology/guide#scoped-styles)çš„CSSåŒ…æ‹¬ä»»ä½•åµŒå¥—ç»„ä»¶ï¼š

```js
const { css, components } = thing.renderCss();
```

ä½ å¯ä»¥å°†ç”Ÿæˆçš„CSSæ”¾åœ¨å•ç‹¬çš„æ ·å¼è¡¨ä¸­ï¼Œæˆ–è€…å°†ä»–ä»¬åŒ…å«åœ¨`<style>`æ ‡ç­¾çš„é¡µé¢ä¸­ã€‚å¦‚æœè¿™æ ·åšï¼Œä½ å¯èƒ½å¸Œæœ›é˜²æ­¢å®¢æˆ·ç«¯ç¼–è¾‘å™¨å†æ¬¡åŒ…å«CSSï¼Œå¯¹äº`svelte-cli`ï¼Œä½¿ç”¨`--no-css`æ ‡å¿—ã€‚åœ¨æ„å»ºå·¥å…·ä¸­ï¼ˆå¦‚`rollup-plugin-svelte`ï¼‰,ä¼ é€’`css:false`é€‰é¡¹ã€‚

> ä¸Šé¢çš„`components`æ•°ç»„ï¼ŒåŒ…å«äº†æ¯ä¸€ä¸ªåµŒå¥—ç»„ä»¶çš„æ ·å¼çš„å¯¹è±¡ï¼Œå…è®¸ä½ å»é™¤é‡å¤å¤šä½™çš„æ ·å¼ï¼Œä¸è¿‡åœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œä½ æ— éœ€è¿™ä¹ˆåšã€‚

## todo

æ­¤æ–‡æ¡£ä»æ˜¯ä¸€é¡¹æ­£åœ¨è¿›è¡Œçš„å·¥ä½œï¼Œå°±æƒ³Svelteæœ¬èº«ä¸€æ ·ã€‚å¦‚æœæœ‰ç‰¹å®šçš„ä¸œè¥¿ä¸¢å¤±æˆ–å¯ä»¥æ”¹è¿›ï¼Œé‚£ä¹ˆè¯·åœ¨[GitHubä¸Š](https://github.com/sveltejs/svelte.technology)æå‡ºä¸€ä¸ªissueï¼